<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping
    PUBLIC "-//Hibernate/Hibernate Mapping DTD//EN"
    "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping package="ccnmtl.vital3">

    <class name="VitalWorksite" table="WORKSITES">
        
        <meta attribute="class-description">
            A Worksite is a self-sufficient area of VITAL. It must have a defined duration and a specified list of members who may use the worksite. If this worksite will be used for a course, an external course provider may be used (in the future) to provide the course info. The "worksiteIdString" property should be a globally unique string which identifies this worksite throughout the institution in the real world, not simply in this database, and should be used to retrieve the worksite info from the worksite provider (if there is one). There is much yet to be decided about this implementation!
			@author Eric Mattes
		</meta>
        
        <cache usage="nonstrict-read-write"/>
        
        <id name="id" type="long" column="WORKSITE_ID">
            <generator class="native"/>
        </id>
        
        <property name="worksiteIdString" type="string" column="WORKSITE_ID_STRING">
            <meta attribute="field-description">A string uniquely identifying this worksite, for use outside of the database. This will probably be generated by Sakai. This is NOT a course id string.</meta>
		</property>
        
        <property name="announcement" type="text">
            <meta attribute="field-description">A message which will be displayed prominently on the worksite page.</meta>
		</property>
        
        <set name="customFields" lazy="true" inverse="true" order-by="ORDINAL_VALUE" cascade="delete">
            <meta attribute="field-description">CustomFields that belong to this Worksite.</meta>
            <cache usage="nonstrict-read-write"/>
            <key column="WORKSITE_ID"/>
            <one-to-many class="CustomField"/>
        </set>
        
        <set name="materials" lazy="true" inverse="true" cascade="delete">
            <meta attribute="field-description">The Materials belonging to this Worksite.</meta>
            <cache usage="nonstrict-read-write"/>
            <key column="WORKSITE_ID"/>
            <one-to-many class="Material"/>
        </set>
        
        <set name="units" lazy="true" inverse="true" order-by="START_DATE" cascade="delete">
            <meta attribute="field-description">Units in this worksite, in order of starting date. A Unit is an arbitrarily-defined block of time.</meta>
            <cache usage="nonstrict-read-write"/>
            <key column="WORKSITE_ID"/>
            <one-to-many class="Unit"/>
        </set>
        
        
    </class>

</hibernate-mapping>
